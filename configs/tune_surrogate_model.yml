tuning_method: "tune_surrogate_model"
n_trials: 100

batch_size: 256

model:
  name: "SurrogateModel"
  model_parameters:
    in_size: null  # The parameter is inferred
    num_class: 1
    d_model: [32, 128, 32]
    dim_feedforward: null  # The parameter is inferred
    dropout: [0.2, 0.6]
    num_heads: [2, 8, 2]
    num_layers: [2,  5]
    batch_norm: [True, False]
    # Not working with current settings: "gin", "khopgnn", "rwgnn", "pna4", "gine"
    gnn_type: ("graph", "graphsage", "gcn", "mpnn")
    k_hop: [1, 3]
    se: "gnn"
    deg: null  # The parameter is inferred
    global_pool: ["mean", "add", "cls"]
    abs_pe: False
    use_edge_attr: False
  loss_name: "l1_loss"
  lr: [0.0001, 0.001]
  weight_decay: 0.00001
  warmup_steps: [1000, 5000]

dataset_params:
  pipeline_graph_rename_path: 'data/openml/pipelines_graphs/pipeline_graph_rename.pickle'
  labels_path: 'data/openml/pipelines_graphs/labels.pickle'
  pipelines_path: 'data/openml/pipelines_graphs/pipelines.pickle'
  seed: 0

trainer:
  num_sanity_val_steps: 0
  max_epochs: 100
  accelerator: "cpu"
  devices: "auto"

tensorboard_logger: null
# tensorboard_logger:
#   save_dir: "experiments/tune_surrogate_model"
#   name: "test_run"

model_checkpoint_callback:
  save_top_k: 1
  monitor: "ndcg"
  save_last: True
  every_n_epochs: 1
  
early_stopping_callback:
  monitor: "ndcg"
  min_delta: 0.001